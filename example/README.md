# BreakdownLogger 使用例

このディレクトリには、BreakdownLogger の使用例を示すサンプルコードが含まれています。

## サンプル一覧

### 1. 基本的な使用例 (`basic_usage.ts`)

基本的な機能をデモンストレーションします：
- デフォルトのログレベル（INFO）での動作
- 環境変数によるログレベルの設定
- 構造化データの出力
- ログレベルの動的変更

実行方法：
```bash
deno run -A example/basic_usage.ts
```

### 2. テスト環境での使用例 (`test_environment.ts`)

テスト環境での使用例を示します：
- 環境変数によるログレベルの設定
- テストケースでのログ出力
- エラーケースのログ出力
- パフォーマンス計測のログ出力

実行方法：
```bash
# デフォルトのログレベル（INFO）で実行
deno run -A example/test_environment.ts

# DEBUGレベルで実行
LOG_LEVEL=debug deno run -A example/test_environment.ts

# WARNレベルで実行
LOG_LEVEL=warn deno run -A example/test_environment.ts
```

## 実行結果の例

### デフォルトのログレベル（INFO）での実行
```
=== テスト環境での使用例 ===
環境変数 LOG_LEVEL の設定: 未設定
テストスイートを開始します...

[2024-03-20T12:34:56.789Z] [INFO] テストケース1: 正常系のテストを開始
[2024-03-20T12:34:56.890Z] [INFO] テストケース1: 成功
[2024-03-20T12:34:56.891Z] [INFO] テストケース2: 異常系のテストを開始
[2024-03-20T12:34:56.992Z] [ERROR] テストケース2: 失敗
データ: Error: 意図的なエラー
[2024-03-20T12:34:56.993Z] [INFO] テストケース3: パフォーマンステストを開始
[2024-03-20T12:34:57.493Z] [INFO] テストケース3: 完了
```

### DEBUGレベルでの実行
```
=== テスト環境での使用例 ===
環境変数 LOG_LEVEL の設定: debug
テストスイートを開始します...

[2024-03-20T12:34:56.789Z] [INFO] テストケース1: 正常系のテストを開始
[2024-03-20T12:34:56.890Z] [DEBUG] 処理結果
データ: {
  "status": "success",
  "data": "テストデータ"
}
[2024-03-20T12:34:56.891Z] [INFO] テストケース1: 成功
[2024-03-20T12:34:56.892Z] [INFO] テストケース2: 異常系のテストを開始
[2024-03-20T12:34:56.993Z] [ERROR] テストケース2: 失敗
データ: Error: 意図的なエラー
[2024-03-20T12:34:56.994Z] [INFO] テストケース3: パフォーマンステストを開始
[2024-03-20T12:34:57.494Z] [DEBUG] パフォーマンス計測結果
データ: {
  "duration": "500ms",
  "timestamp": "2024-03-20T12:34:57.494Z"
}
[2024-03-20T12:34:57.495Z] [INFO] テストケース3: 完了
```

## 注意点

1. 環境変数 `LOG_LEVEL` の設定
   - 実行時に環境変数を設定することで、ログレベルを制御できます
   - 設定可能な値: `debug`, `info`, `warn`, `error`
   - デフォルト値: `info`

2. パーミッション
   - 環境変数の読み取りに `--allow-env` フラグが必要です
   - その他の機能に応じて必要なパーミッションを付与してください

3. テスト環境での使用
   - テストケースの実行状況を詳細に把握できます
   - エラー発生時のデバッグが容易になります
   - パフォーマンス計測結果の記録が可能です 